<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>快火后台系统</title>
<link rel="stylesheet" type="text/css"
	th:href="@{/static/css/common/models.css}">
<!--bootstrap-select  css文件-->
<link rel="stylesheet" type="text/css"
	th:href="@{/static/js/plugins/bootstrapselect/css/bootstrap.min.css}" />
<link rel="stylesheet" type="text/css"
	th:href="@{/static/js/plugins/bootstrapselect/css/bootstrap-select.css}" />
<!--富文本  css文件-->
<!--<link rel="stylesheet" href="css/ueditor.css">-->
<!--图片点击放大  css文件-->
<link rel="stylesheet" type="text/css"
	th:href="@{/static/js/plugins/viewer/css/viewer.min.css}" />
</head>
<body>
	<div class="MainContent">
		<div class="current">
			当前位置：<a href="welcome.html" alt="">商户管理 &gt;</a><a href="#" alt="">商户列表
				&gt;</a><span>商户详情</span>
		</div>
		<div class="MainCont ">
			<div class="ph_subConTit">
				<h2>商户详情</h2>
			</div>
			<form id="form">
				<div class="mainFrom">
					<label class="left"> <span class="">企业名称:</span>
					</label> <input th:value="${merchantVO.companyName}" name="companyName"
						type="text" class="left" placeholder="" />
				</div>
				<div class="mainFrom">
					<label class="left"> <span class="">商户账号:</span>
					</label> <input th:value="${merchantVO.telPhone}" name="telPhone"
						type="text" class="left" placeholder="" />
				</div>
				<div class="mainFrom">
					<label class="left"> <span class="">管理费用比例:</span>
					</label> <input th:value="${merchantVO.businessProfitRatio}"
						name="businessProfitRatio" type="text" class="left" placeholder="" />
				</div>
				<!--<div class="mainFrom">
					<label class="left"> <span class="">推广师账号:</span>
					</label> <input th:value="${merchantVO.promoterTelPhone}"
						id="promoterAccount" type="text" class="left" placeholder="" />
				</div>
				<div class="mainFrom">
					<label class="left"> <span class="">推广师姓名:</span>
					</label> <input th:value="${merchantVO.promoterMemberName}"
						id="promoterAccountName" type="text" class="left"
						placeholder="暂无推广师" disabled />
				</div>-->
				<div class="mainFrom">
					<label class="left"> <span class="">门店名称:</span>
					</label> <input th:value="${merchantVO.merchantName}" name="merchantName"
						type="text" class="left" placeholder="" />
				</div>
				<div class="mainFrom">
					<label class="left"> <span class="">联系人:</span>
					</label> <input th:value="${merchantVO.personName}" name="personName"
						type="text" class="left" placeholder="" />
				</div>
				<div class="mainFrom">
					<label class="left"> <span class="">门店地址:</span>
					</label>
					<div id="area_div"></div>
				</div>
				<div class="mainFrom">
					<label class="left"> <span class="">详细地址:</span>
					</label> <input th:value="${merchantVO.address}" name="address" type="text"
						id="tipinput" value='点击地图显示地址/输入地址显示位置' placeholder="" />
					<div id="message"></div>
				</div>
				<div class="mainFrom">
					<div id="map_container" tabindex="0" class="relative">
						<div class="location_span absolute">
							当前经纬度：X: <span id="lng" th:text="${merchantVO.longitude}"></span>
							Y:<span id="lat" th:text="${merchantVO.latitude}"></span>
						</div>
					</div>
				</div>
				<div class="mainFrom">
					<label class="left"> <span class="">行业分类:</span>
					</label>
					<div id="merchantTypeDiv0"></div>
					<div id="merchantTypeDiv1"></div>
					<div id="merchantTypeDiv2"></div>
					<div id="merchantTypeDiv3"></div>
					<div id="merchantTypeDiv4"></div>
				</div>

				<div class="mainFrom imgupbox">
					<label class="left"> <span class="">营业执照:</span>
					</label>
					<div class="content-box">

						<div class="img-box addIndustry">
							<span class="imgup-notice">请上传您的营业执照，照片大小不超过10M.</span>
							<div class="img-box full">
								<section class="img-section">
									<div class="z_photo upimg-div" data-file-type=1></div>
								</section>
							</div>
						</div>
					</div>
				</div>
				<div class="mainFrom imgupbox">
					<label class="left"> <span class="">法人身份证:</span>
					</label>
					<div class="content-box">
						<div class="img-box addIndustry">
							<span class="imgup-notice">请上传您的身份证正反面，照片大小不超过10M.</span>
							<div class="img-box full">
								<section class="img-section">
									<div class="z_photo upimg-div" data-file-type=2></div>
								</section>
							</div>
						</div>
					</div>
				</div>
				<div class="mainFrom imgupbox">
					<label class="left"> <span class="">门店照片:</span>
					</label>
					<div class="content-box">
						<div class="img-box addIndustry">
							<span class="imgup-notice">请上传门店照片，照片大小不超过10M.</span>
							<div class="img-box full">
								<section class="img-section">
									<div class="z_photo upimg-div" data-file-type=3></div>
								</section>
							</div>
						</div>
					</div>
				</div>
				<div class="mainFrom imgupbox">
					<label class="left"> <span class="">其他认证资料:</span> <!--<span class="imgup_notice"></span>-->
					</label>
					<div class="content-box">
						<div class="img-box addIndustry">
							<span style="display: block; height: 16px; width: 200px;"></span>
							<div class="img-box full">
								<section class="img-section">
									<div class="z_photo upimg-div" data-file-type=3></div>
								</section>
							</div>
						</div>
					</div>
				</div>
				<div class="PopupBtn btnLeft"
					style="margin-bottom: 20px; padding-left: 104px;">
					<input id="cancel" class="submit addMerchant_cancel" type="button"
						value="返回">
				</div>
				<!--推广师id-->
				<input name="promoterId" type="hidden" /> <input
					th:value="${merchantVO.id}" name="id" type="hidden" />
			</form>
		</div>
	</div>
	<script type="text/javascript"
		th:src="@{/static/js/common/jquery-1.11.1.min.js}"></script>
	<!--bootstrap-select-->
	<script type="text/javascript"
		th:src="@{/static/js/plugins/bootstrapselect/bootstrap.min.js}"></script>
	<script type="text/javascript"
		th:src="@{/static/js/plugins/bootstrapselect/bootstrap-select.js}"></script>
	<!--<script type="text/javascript" th:src="@{/static/js/plugins/bootstrapselect/select.js}"></script>-->
	<!--属性输入框的增加和删除-->
	<script type="text/javascript" th:src="@{/static/js/common/attrbox.js}"></script>
	<!--图片点击放大-->
	<script type="text/javascript"
		th:src="@{/static/js/plugins/viewer/viewer-jquery.min.js}"></script>
	<script type="text/javascript" th:src="@{/static/js/common/imgUp.js}"></script>
	<!--区域-->
	<script type="text/javascript" th:src="@{/static/js/common/cascade.js}"></script>
	<script type="text/javascript"
		th:src="@{/static/js/common/htmlHelper.js}"></script>
	<script type="text/javascript"
		th:src="@{/static/js/plugins/layer/layer.js}"></script>
	<!--高德地图API-->
	<script type="text/javascript"
		src="//webapi.amap.com/maps?v=1.3&key=82cb1402e66fd67bee6e35dac65195f0"></script>
	<script type="text/javascript" th:src="@{/static/js/common/main.js}"></script>
	<script th:inline="javascript">
	
	window.onload = function(){
		var bindMerchant = [[${merchantVO}]];
	    //回填地图
	    $("#tipinput").change();
	    //回填图片
	    $(bindMerchant.merchantImageVOList).each(function (i, img) {
	        var section =
	            '<section class="up-section left">' +
	            '<img class="up-img zoom-img" data-img-upload-src="' + img.url + '" src="' + img.url + '">' +
	            '</section>';
	        var divDataFileType = $("div[data-file-type='" + img.type + "']");
	        $(section).appendTo(divDataFileType);
	    });

	    cascade({
	        totalSelect: 4,
	        DivId: "area_div",
	        bindData: [bindMerchant.provinceId, bindMerchant.cityId, bindMerchant.countyId, bindMerchant.townId]
	    });
	    var len=bindMerchant.merchantMerchantTypeVOList.length;
	     for(var i=0;i<len;i++){
	     	cascade({
	             url: "/web/merchantType/getMerchantTypeByChildList",
	             totalSelect: 2,
	             DivId: "merchantTypeDiv"+i,
	             selectNames: ["", "merchantTypeId"],
	             requestIds: ["parentId"],
	             requestNames: ["merchantTypeName", "merchantTypeName"],
	             bindCols: ["id", "id"],
	             bindData: [bindMerchant.merchantMerchantTypeVOList[i].firstMerchantTypeId, bindMerchant.merchantMerchantTypeVOList[i].secondMerchantTypeId]
	         });
	}
}

    $(function () {
        //取消
        $("#cancel").click(function () {
            window.history.back();
        });
        $("select[name],input[id!='cancel']").prop("disabled", "true");
        var map = new AMap.Map('map_container', {
            resizeEnable: true,
            zoom: 16,
            center: [bindMerchant.longitude, bindMerchant.latitude],
            isHotspot: true,
            dragEnable: true,
            doubleClickZoom: true,
            keyboardEnable: true,
            scrollWheel: true,
            features: ['bg', 'point', 'road', 'building']
        });
        new AMap.Marker({
            map: map,
            bubble: true
        });
    })
</script>
</body>
</html>

